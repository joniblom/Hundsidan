// Function to populate the dropdowns from a text file
function populateDropdowns() {
    // Fetch the dog breeds from the text file
    fetch('dog-breeds.txt')
        .then(response => response.text())
        .then(data => {
            const breeds = data.split('\n');
            populateDropdown('dropdown1', breeds);
            populateDropdown('dropdown2', breeds);
        })
        .catch(error => console.error('Error fetching dog breeds:', error));
}

// Function to populate a dropdown with options
function populateDropdown(dropdownId, options) {
    const dropdown = document.getElementById(dropdownId);
    options.forEach(option => {
        const optionElement = document.createElement('option');
        optionElement.value = option;
        optionElement.textContent = option;
        dropdown.appendChild(optionElement);
    });
}

// Function to perform Unsplash image search
function performUnsplashImageSearch() {
    // Call the function to populate the dropdowns if not already populated
    if (document.getElementById("dropdown1").options.length === 0) {
        populateDropdowns();
    }

    var dropdown1Value = document.getElementById("dropdown1").value;
    var dropdown2Value = document.getElementById("dropdown2").value;

    var searchQuery = `${dropdown1Value} ${dropdown2Value}`;
    var apiKey = 'OpXl6YYfRBMCjFAOM0psuA6T_t_ihr07WiCtiH5Ibfk';
    var apiUrl = `https://api.unsplash.com/search/photos?query=${encodeURIComponent(searchQuery)}&client_id=${apiKey}`;

    // Fetch image results from Unsplash API
    fetch(apiUrl)
        .then(response => response.json())
        .then(data => {
            displayImageResults(data.results);
        })
        .catch(error => console.error('Error fetching image results from Unsplash:', error));
}

// Function to perform Google Image search
function performGoogleImageSearch() {
    // Call the function to populate the dropdowns if not already populated
    if (document.getElementById("dropdown1").options.length === 0) {
        populateDropdowns();
    }

    var dropdown1Value = document.getElementById("dropdown1").value;
    var dropdown2Value = document.getElementById("dropdown2").value;

    var searchQuery = `${dropdown1Value} "crossed with" ${dropdown2Value}`;
    var apiKey = 'AIzaSyCYFQqSPgMp4e8ldTG4Bfj76MeUhHecOws';
    var cx = 'd33d241c11a354808'; // You need to create a Custom Search Engine in the Google Developer Console.

    var searchUrl = `https://www.googleapis.com/customsearch/v1?q=${encodeURIComponent(searchQuery)}&cx=${cx}&key=${apiKey}&searchType=image`;

    // Fetch image results from Google Custom Search API
    fetch(searchUrl)
        .then(response => response.json())
        .then(data => {
            displayImageResults(data.items);
        })
        .catch(error => console.error('Error fetching image results:', error));
}

// Function to display image search results
function displayImageResults(images) {
    var imageResultsDiv = document.getElementById('imageResults');
    imageResultsDiv.innerHTML = ''; // Clear previous results

    images.forEach(image => {
        var imgElement = document.createElement('img');
        imgElement.src = image.link;
        imgElement.alt = image.title;
        imageResultsDiv.appendChild(imgElement);
    });
}



// Call the function to populate the dropdowns when the page loads
window.onload = populateDropdowns;
